language: generic
os: osx

install:
  # Download and install a minimal TeX Live, based on
  # https://github.com/latex3/latex3/blob/master/support/texlive.sh.
  - curl --location --remote-name http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz
  - tar -xf install-tl-unx.tar.gz
  - cd install-tl-20*
  - echo -e "selected_scheme scheme-minimal\nTEXDIR /usr/local/texlive\noption_doc 0\noption_src 0" > texlive.profile
  - sudo ./install-tl -profile=texlive.profile
  - cd ..
  - PATH=$PATH:/usr/local/texlive/bin/x86_64-darwin
  - sudo tlmgr install
    fontspec
    geometry
    graphics
    hyperref
    hyphenex
    latex-bin
    libertine
    luaotfload
    oberdiek
    titlesec
    url
  # Install Hunspell <https://hunspell.github.io> and spell-checking
  # dictionaries.
  - HOMEBREW_NO_AUTO_UPDATE=1 brew install hunspell
  - curl --silent --show-error --location --remote-name --remote-header-name https://extensions.openoffice.org/en/download/1471
  - unzip en_us.oxt en_US.aff en_US.dic -d ~/Library/Spelling
  - echo -e "6\nIFC\nInterfraternity\nNIC\nRitualist\nSAPAC\nteardown" > Bylaws.dic

script:
  - test "$(hunspell -d en_US,Bylaws -l -t Bylaws.tex)" == ''
  - for i in {1..2}; do lualatex -interaction=batchmode Bylaws.tex; done
